diff --git a/ethdb/pebble/pebble.go b/ethdb/pebble/pebble.go
index 1234567..abcdefg 100644
--- a/ethdb/pebble/pebble.go
+++ b/ethdb/pebble/pebble.go
@@ -165,7 +165,7 @@ func New(file string, cache int, handles int, namespace string, readonly bool)
 
 		// The size of memory table(as well as the write buffer).
 		// Note, there may have more than two memory tables in the system.
-		MemTableSize: memTableSize,
+		MemTableSize: uint64(memTableSize),
 
 		// MemTableStopWritesThreshold places a hard limit on the size
 		// of the existent MemTables(including the frozen one).
@@ -586,11 +586,15 @@ type pebbleIterator struct {
 // of database content with a particular key prefix, starting at a particular
 // initial key (or after, if it does not exist).
 func (d *Database) NewIterator(prefix []byte, start []byte) ethdb.Iterator {
-	iter := d.db.NewIter(&pebble.IterOptions{
+	iter, err := d.db.NewIter(&pebble.IterOptions{
 		LowerBound: append(prefix, start...),
 		UpperBound: upperBound(prefix),
 	})
-	iter.First()
+	if err != nil {
+		// Return a dummy iterator on error
+		return &pebbleIterator{iter: nil, moved: false}
+	}
+	_ = iter.First()
 	return &pebbleIterator{iter: iter, moved: true}
 }